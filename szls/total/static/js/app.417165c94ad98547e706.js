webpackJsonp([4],{0:function(e,t,n){n("amBI"),n("briU"),e.exports=n("NHnr")},"2okz":function(e,t){},"3ntp":function(e,t){},"8/c5":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={data:function(){return{loginPeople:"",isClick:0,leftNum:0,rightNum:0,isleft:!1,isright:!0,xzdata:[{name:"首页",key:0,url:"/"},{name:"政务管理",key:1,url:"/"},{name:"业务管理",key:2,url:"http://218.241.206.66:8097/web/business/#/"},{name:"指挥调度",key:3,url:"/"},{name:"辅助决策",key:4,url:"/"},{name:"系统管理",key:5,url:"http://218.241.206.66:8097/web/myuser/#/userManager/userManagerHome"}]}},computed:{},methods:{welcome:function(){this.loginPeople=sessionStorage.getItem("userName")+"-"+sessionStorage.getItem("deptName")+"-"+sessionStorage.getItem("userTitle")},goHome:function(){this.isClick=-1,window.location.href="http://218.241.206.66:8097/web/total/#/"},logout:function(){sessionStorage.clear(),localStorage.clear(),window.location.href=location.origin+"/web/total/#/login"}},created:function(){this.welcome()},mounted:function(){var e=document.querySelector(".tjnav"),t=document.getElementsByClassName("leftNav"),n=document.getElementsByClassName("rigthNav"),o=(e.offsetWidth-1032)/2;console.log(o),t[0].style.width=o+"px",n[0].style.width=o+"px"}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"headerOa"},[n("el-row",[n("el-col",{attrs:{span:24}},[n("div",[n("div",{staticClass:"head-bj"},[n("div",{staticClass:"logo"},[n("div",{staticClass:"logoWordes"})]),e._v(" "),n("div",{staticClass:"operateBox"},[n("span",[e._v("欢迎！"+e._s(e.loginPeople))]),e._v(" "),n("a",{on:{click:e.goHome}},[n("i",{staticClass:"iconfont icon-cangku"}),e._v("平台主页")]),e._v(" "),n("a",{on:{click:e.logout}},[n("i",{staticClass:"iconfont icon-tuichu"}),e._v("退出")])])])])])],1),e._v(" "),n("el-row",{attrs:{span:24}},[n("div",{staticClass:"tjnav"},[n("el-col",{staticClass:"leftNav"}),e._v(" "),n("div",{staticStyle:{float:"left"}},[e.xzdata?[n("div",{staticClass:"menu",attrs:{id:"menu"}},[n("ul",{staticClass:"menu-navHome"},e._l(e.xzdata,function(t,o){return n("li",{key:t.key,staticClass:"nav-child",class:e.isClick==o?"click_back":""},[n("a",{staticStyle:{color:"#fff"},attrs:{href:t.url,target:"_blank"}},[e._v(e._s(t.name))])])}),0)])]:e._e()],2),e._v(" "),n("el-col",{staticClass:"rigthNav"})],1)])],1)},staticRenderFns:[]};var r={methods:{toContact:function(){this.$router.push({path:"/contact"})},setHome:function(){alert("设为首页"),Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch).setCharPref("browser.startup.homepage",window.location.href)},collect:function(){var e=window.location,t=document.title;if(navigator.userAgent.toLowerCase().indexOf("msie 8")>-1)external.AddToFavoritesBar(e,"山西粮食局","");else try{window.external.addFavorite(e,t)}catch(n){try{window.sidebar.addPanel(t,e,"")}catch(e){alert("加入收藏失败，请使用Ctrl+D进行添加")}}}}},i={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"footer"},[t("footer",{staticClass:"com-footer"},[t("div",{staticClass:"foter-content"},[t("ul",{staticClass:"fn-clear"},[t("li",{staticClass:"biaoshi"}),this._v(" "),t("li",{staticClass:"address"},[t("p",[t("span",[this._v("版权所有：天津市粮食和物资储备局")])]),this._v(" "),t("p",[this._v("技术支持电话：022-27128207    传真：022-27128209")])])])])])])}]};var s={components:{Header:n("C7Lr")(o,a,!1,function(e){n("H4RM")},"data-v-2364047d",null).exports,Footer:n("C7Lr")(r,i,!1,function(e){n("SxNV")},"data-v-832654bc",null).exports},data:function(){return{list:[]}},created:function(){this.getData()},methods:{getData:function(){}}},c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("Header"),this._v(" "),t("router-view"),this._v(" "),t("Footer")],1)},staticRenderFns:[]};var u=n("C7Lr")(s,c,!1,function(e){n("2okz")},"data-v-56166126",null);t.default=u.exports},D9hl:function(e,t){},EXzV:function(e,t){},H4RM:function(e,t){},IcnI:function(e,t,n){"use strict";var o=n("xd7I"),a=n("9rMa"),r=n("uAC3"),i=n.n(r),s={state:{sidebar:{opened:!+i.a.get("sidebarStatus"),withoutAnimation:!1,asideState:!1},device:"desktop"},mutations:{TOGGLE_SIDEBAR:function(e){e.sidebar.opened?i.a.set("sidebarStatus",1):i.a.set("sidebarStatus",0),console.log("sidebar状态",e.sidebar.opened),e.sidebar.opened=!e.sidebar.opened,e.sidebar.withoutAnimation=!1},CLOSE_SIDEBAR:function(e,t){i.a.set("sidebarStatus",1),e.sidebar.opened=!1,e.sidebar.withoutAnimation=t},TOGGLE_DEVICE:function(e,t){e.device=t}},actions:{ToggleSideBar:function(e){(0,e.commit)("TOGGLE_SIDEBAR")},CloseSideBar:function(e,t){(0,e.commit)("CLOSE_SIDEBAR",t.withoutAnimation)},ToggleDevice:function(e,t){(0,e.commit)("TOGGLE_DEVICE",t)}}},c=n("rVsN"),u=n.n(c),l=n("M9A7"),d=n("TIfe"),f={state:{token:Object(d.b)(),userId:Object(d.c)(),name:"",avatar:"",photo:Object(d.a)(),data:[],index:0,formDatas:[]},mutations:{SET_USERID:function(e,t){e.userId=t},SET_PHOTO:function(e,t){e.photo=t},SET_TOKEN:function(e,t){e.token=t},SET_NAME:function(e,t){e.name=t},SET_AVATAR:function(e,t){e.avatar=t},SET_DATA:function(e,t){e.data=t},SET_FORMDATAS:function(e,t){e.formDatas=t},SET_INDEX:function(e,t){e.index=t},SET_ORGID:function(e,t){e.orgid=t},SET_USER_NODE_LEVEL:function(e,t){e.userNodeLevel=t}},actions:{Login:function(e,t){var n=e.commit,o=t.name.trim();return new u.a(function(e,a){Object(l.d)(o,t.password).then(function(t){var o=t.data;localStorage.setItem("token",o.token),sessionStorage.setItem("TOKENL",o.token),n("SET_TOKEN",o.token),e(t)}).catch(function(e){a(e)})})},clearData:function(e){var t=e.commit;return new u.a(function(e,n){t("SET_DATA",[])})},GetInfo:function(e){var t=e.commit;e.state;return new u.a(function(e,n){Object(l.b)().then(function(o){var a=o.data;console.log(o.infoCode),200===o.infoCode?(t("SET_DATA",a),e(o),sessionStorage.setItem("orgName",a.orgName),sessionStorage.setItem("orgCode",a.orgCode),sessionStorage.setItem("userName",a.userName),sessionStorage.setItem("deptName",a.deptName),sessionStorage.setItem("userCode",a.userCode),sessionStorage.setItem("userType",a.userType),sessionStorage.setItem("userTitle",a.userTitle),sessionStorage.setItem("userRole",a.userRole),sessionStorage.setItem("userNodeLevel",a.userNodeLevel)):n("getInfo: data must be a non-null array !")}).catch(function(e){n(e)})})},LogOut:function(e){var t=e.commit,n=e.state;return new u.a(function(e,o){Object(l.c)(n.token).then(function(){t("SET_TOKEN",""),t("SET_DATA",[]),Object(d.e)(),window.localStorage.removeItem("token"),sessionStorage.clear(),localStorage.clear(),e(),Object(d.d)(),Object(d.f)()}).catch(function(e){o(e)})})},FedLogOut:function(e){var t=e.commit;return new u.a(function(e){t("SET_TOKEN",""),t("SET_DATA",[]),Object(d.e)(),window.localStorage.removeItem("token"),sessionStorage.clear(),localStorage.clear(),Object(d.f)(),Object(d.d)(),e()})},ChangeMenu:function(e,t){var n=e.commit;return new u.a(function(e){n("SET_INDEX",t)})},setTokens:function(e){var t=e.commit;return new u.a(function(e,n){t("SET_DATA",[])})}}},m={sidebar:function(e){return e.app.sidebar},navbar:function(e){return e.app.navbar},device:function(e){return e.app.device},token:function(e){return e.user.token},avatar:function(e){return e.user.avatar},name:function(e){return e.user.name},data:function(e){return e.user.data},userId:function(e){return e.user.userId},photo:function(e){return e.user.photo},formDatas:function(e){return e.user.formDatasl},index:function(e){return e.user.index?e.user.index:window.localStorage.getItem("menuIndex")}};o.default.use(a.a);var g=new a.a.Store({modules:{app:s,user:f},getters:m});t.a=g},M9A7:function(e,t,n){"use strict";t.d=function(e,t){return Object(r.a)({url:a.b+"/auth/login/1/"+e+"/"+t,method:"post",data:""})},t.c=function(e){return Object(r.a)({url:a.a+"/user/logout",method:"post",params:{token:e}})},t.a=function(e){return Object(r.a)({url:a.a+"/roleResources/findRoleResourcesTree?resourcesCode=RM1001003&roleCode="+e,method:"post"})},t.b=function(){return Object(r.a)({url:a.a+"/user/getCurrUserinfo",method:"get"})};var o=n("3cXf"),a=(n.n(o),n("gyMJ")),r=n("WVOg")},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("briU");var o=n("xd7I"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var r=n("C7Lr")({name:"App"},a,!1,function(e){n("EXzV")},null,null).exports,i=n("3XdE");n("8/c5");o.default.use(i.a);var s=new i.a({routes:[{path:"/login",name:"login",component:function(){return n.e(1).then(n.bind(null,"fAfb"))}},{path:"/",name:"index",redirect:"index",component:function(){return new Promise(function(e){e()}).then(n.bind(null,"8/c5"))},children:[{path:"/",name:"Content",component:function(){return n.e(0).then(n.bind(null,"sNol"))}},{path:"/interaction/onlineSurvey/surveyTest",name:"政民互动的在线调查-调查问卷",component:function(){return n.e(2).then(n.bind(null,"QTBH"))}}]}]}),c=n("C/do"),u=n.n(c),l=n("IcnI"),d=(n("rRuq"),n("gQNZ"),n("VTzc"),n("uxEr"),n("aiqZ")),f=n.n(d),m=(n("lMgl"),n("D9hl"),n("3ntp"),n("3cXf")),g=n.n(m),h=n("E4C3"),p=n.n(h),v=(n("ve9D"),n("TIfe"),n("M9A7")),S=["/login"];s.beforeEach(function(e,t,n){p.a.start(),sessionStorage.getItem("TOKENL")?"/login"===e.path?(n({path:"/"}),p.a.done()):0===l.a.getters.data.length?l.a.dispatch("GetInfo").then(function(e){localStorage.setItem("countyCode",e.data.countyCode);var t=e.data.userRole;Object(v.a)(t).then(function(e){var t=e.data[0].children[0];sessionStorage.setItem("xzdata",g()(t)),n()})}).catch(function(e){l.a.dispatch("FedLogOut").then(function(){c.Message.error(e||"Verification failed, please login again"),"/login"!=t.path&&n({path:"/"})})}):n():-1!==S.indexOf(e.path)?n():(n("/login"),p.a.done())}),s.afterEach(function(){p.a.done()});n("9VAH"),n("iOeh");var w=n("DMPO"),b=n.n(w),T={goodTime:function(e){var t=(new Date).getTime()-new Date(e).getTime(),n=t/31104e6,o=t/2592e6,a=t/6048e5,r=t/864e5,i=t/36e5,s=t/6e4;return n>=1?"发表于 "+~~n+" 年前":o>=1?"发表于 "+~~o+" 个月前":a>=1?"发表于 "+~~a+" 周前":r>=1?"发表于 "+~~r+" 天前":i>=1?"发表于 "+~~i+" 个小时前":s>=1?"发表于 "+~~s+" 分钟前":"刚刚"}};o.default.use(f.a),o.default.use(b.a),o.default.prototype.$utils=T,o.default.use(u.a),o.default.config.productionTip=!1,new o.default({el:"#app",router:s,store:l.a,components:{App:r},template:"<App/>"})},SxNV:function(e,t){},TIfe:function(e,t,n){"use strict";t.b=function(){return localStorage.getItem("token")},t.c=function(){return a.a.get(i)},t.a=function(){return a.a.get(s)},t.g=function(e){return localStorage.setItem("token",e)},t.e=function(){return a.a.remove(r)},t.f=function(){return a.a.remove(i)},t.d=function(){return a.a.remove(s)};var o=n("uAC3"),a=n.n(o),r="TOKENL",i="idBusiness",s="photo"},VTzc:function(e,t){},WVOg:function(e,t,n){"use strict";var o=n("rVsN"),a=n.n(o),r=n("84iU"),i=n.n(r),s=n("C/do"),c=(n.n(s),n("IcnI")),u=n("TIfe"),l=i.a.create({headers:{"Content-Type":"application/json;charset=utf-8"},baseURL:"http://218.241.206.66:8097"});window.flag||l.interceptors.request.use(function(e){window.localStorage.getItem("token");return sessionStorage.getItem("TOKENL")&&(e.headers.token=sessionStorage.getItem("TOKENL")),e},function(e){a.a.reject(e)}),i.a.defaults.withCredentials=!0,l.interceptors.response.use(function(e){window.localStorage.getItem("token");e.headers.token&&(window.flag=!0,window.localStorage.removeItem("token"),window.localStorage.setItem("token",e.headers.token),Object(u.g)(e.headers.token),window.flag=!1);var t=e.data;return 200===t.infoCode?t:(401===t.infoCode&&(window.location.href="http://192.168.80.86:8087/web/portal/#/login"),50008!==t.code&&50012!==t.code&&50014!==t.code||s.MessageBox.confirm("你已被登出，可以取消继续留在该页面，或者重新登录","确定登出",{confirmButtonText:"重新登录",type:"warning"}).then(function(){c.a.dispatch("FedLogOut").then(function(){location.reload()})}),t)},function(e){if("401"===e.message.substr(e.message.length-3))return s.MessageBox.confirm("你已被登出，可以取消继续留在该页面，或者重新登录","确定登出",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then(function(){c.a.dispatch("FedLogOut").then(function(){location.reload()})}),a.a.reject("error");Object(s.Message)({message:e.message,type:"error",duration:1e3})}),t.a=l},gQNZ:function(e,t){},gyMJ:function(e,t,n){"use strict";n.d(t,"d",function(){return o}),n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r}),n.d(t,"c",function(){return i});var o="/portal",a="/auth",r="/myuser",i="/data-dict"},lMgl:function(e,t){},rRuq:function(e,t){},uxEr:function(e,t){},ve9D:function(e,t){}},[0]);